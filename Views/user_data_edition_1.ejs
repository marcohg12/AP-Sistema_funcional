<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
        <title>Registro</title>
    </head>

    <body>

        <section class="vh-100" style="background-color: #606c38;">
            <div class="container py-5">
                <div class="row d-flex justify-content-center align-items-center">
                    <div class="col col-xl-10">

                        <div class="card" style="border-radius: 1rem;">

                            <form method="POST" action="/home">                    
                                <div class="row g-0">

                                    <div class="col-md-6 col-lg-6 d-none d-md-block">       
                                        <div class="card-body p-4 p-lg-5 text-black">

                                            <div class="d-flex align-items-center mb-3 pb-1">
                                                <span class="h1 fw-bold mb-0">Mi perfil</span>
                                            </div>
            
                                              <div class="form-outline mb-4">
                                                <input type="text" id="name" name="name" required class="form-control form-control-lg" value="<%= user_data.name %>"/>
                                                <label class="form-label">Nombre (s)</label>
                                              </div>
            
                                              <div class="form-outline mb-4">
                                                <input type="text" id="last_name" name="last_name" required class="form-control form-control-lg" value="<%= user_data.last_name %>"/>
                                                <label class="form-label">Apellido (s)</label>
                                              </div>
            
                                              <div class="form-outline mb-4">
                                                <input type="date" id="birthdate" name="birthdate" required class="form-control form-control-lg" value="<%= user_data.birthdate %>"/>
                                                <label class="form-label">Fecha de nacimiento</label>
                                              </div>
            
                                              <div class="form-outline mb-4">
                                                <input type="text" name="identification_number" required oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                       id="identification_number" maxlength="15" class="form-control form-control-lg" value="<%= user_data.identification_number %>"/>
                                                <label class="form-label">Número de identificación</label>
                                              </div>

                                              <div class="btn-group">

                                                <select class="form-select me-4" style="width:200px" name="id_type" id="id_type" required>
                                                  <option value="">Tipo de identificación</option>
                                                  <% id_types.forEach( id_type => { %>
                                                    <option value="<%= id_type.id %>"><%= id_type.name %></option>
                                                  <% }) %>
                                                </select>

                                                <select class="form-select" style="width:200px" name="gender" id="gender" required>
                                                  <option value="">Género</option>
                                                  <% genders.forEach( gender => { %>
                                                    <option value="<%= gender.id %>"><%= gender.name %></option>
                                                  <% }) %>
                                                </select>

                                            </div>

                                        </div>                         
                                      </div>
            
                                      <div class="col-md-6 col-lg-6 d-flex d-md-block">
                                        <div class="card-body p-4 p-lg-5 text-black">

                                            <div class="d-flex align-items-center mb-3 pb-1">
                                                <span class="h1 fw-bold mb-0">&nbsp;</span>
                                            </div>
            
                                            <div class="form-outline mb-4">
                                              <input type="text" id="username" name="username" disabled class="form-control form-control-lg" value="<%= user_data.username %>"/>
                                              <label class="form-label">Nombre de usuario</label>
                                            </div>
                          
                                            <div class="form-outline mb-4">
                                              <input type="password" id="password" name="password" required class="form-control form-control-lg" />
                                              <label class="form-label">Contraseña</label>
                                            </div>

                                            <div class="form-outline mb-4">
                                              <input type="file" id="photo" name="photo" class="form-control form-control-lg" />
                                              <label class="form-label">Foto de perfil</label>
                                          </div>

                          
                                          <div class="btn-group">

                                            <div class="pt-1 mb-4 me-5">
                                              <button class="btn btn-dark btn-lg btn-block" style="width:200px" type="submit">Actualizar</button>
                                            </div>

                                            <div class="pt-1 mb-4 me-4">
                                              <a href="/my_account/my_profile_2" class="btn btn-outline-secondary btn-lg btn-block" style="width:200px">Ver más</a>
                                            </div>
            
                                          </div>

                                        </div>
                                      </div>

                                </div>
                            </form>

                        </div>

                    </div>
                </div>
            </div>
          </section>

    </body>
    <script>
        birthdate.max = new Date().toISOString().split("T")[0];

        gender_id = "<%= user_data.gender_ref %>"
        id_type_id = "<%= user_data.id_type_ref %>"

        document.getElementById('gender').value = gender_id;
        document.getElementById('id_type').value = id_type_id;
    </script> 
</html>